<!DOCTYPE html>
<html>
<head>
    <title>월배당 목표 계산기</title>
    <!-- CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://uicdn.toast.com/tui-grid/latest/tui-grid.css">

    <!-- JS -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/core-js/3.19.0/minified.js"></script>
    <script src="https://uicdn.toast.com/tui-grid/latest/tui-grid.js"></script>

    <script>
        function calc(월목표, 월적립, 이율) {
            let month = 0;
            let value = 0;
            let 월배당 = 0;

            let tableData = [];
            let pageSize = 10;

            while (월배당 < 월목표) {
                value += 월적립;
                월배당 = Math.floor((value * (이율 / 100) / 12) * 0.846);
                value += 월배당;
                month++;

                tableData.push([month, numberWithCommas(value) + '원', numberWithCommas(월배당) + '원']);
            }
            console.log("tableData::", tableData);

            // 결과를 화면에 출력
            let result = "필요기간 : " + month + "개월, " + "원금 : " + numberWithCommas(value) + "원";
            console.log(result);
            $('#result').text(result);

            // TOAST UI Grid 생성
            const grid = new tui.Grid({
                el: document.getElementById('resultTable'),
                columns: [
                    { header: '월', name: '월' },
                    { header: '주식 보유액', name: '주식 보유액' },
                    { header: '월 배당금', name: '월 배당금' }
                ],
                data: {
                    rows: tableData
                },
                scrollX: false,
                pageOptions: {
                    useClient: true,
                    perPage: pageSize,
                    visiblePages: 10,
                }
            });
        }

        function numberWithCommas(x) {
            return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");ㄴ
        }

        $(document).ready(function () {
            $('#calculateBtn').click(function () {
                // 사용자로부터 입력받은 값들을 가져옴
                let 월목표 = parseInt($('#월목표').val());
                let 월적립 = parseInt($('#월적립').val());
                let 이율 = parseFloat($('#이율').val());

                // calc 함수 호출하여 결과를 화면에 출력
                calc(월목표, 월적립, 이율);
            });
        });
    </script>
</head>
<body>
    <div class="container">
        <!-- 웹사이트 내용을 여기에 작성 -->
        <label for="월목표">월 목표 배당금: </label>
        <input type="number" id="월목표" class="form-control"><br>
        <label for="월적립">월 적립액: </label>
        <input type="number" id="월적립" class="form-control"><br>
        <label for="이율">배당률: </label>
        <input type="number" id="이율" class="form-control"><br>
        <button id="calculateBtn" class="btn btn-primary">계산하기</button>
        <br><br>
        <div id="result"></div>
        <br><br>
        <div id="resultTable"></div>
    </div>
</body>
</html>
